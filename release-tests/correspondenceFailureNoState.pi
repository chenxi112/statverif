param verboseClauses = explained.

free c.

free initKey.
private free beep.
fun enc/2.
reduc dec(enc(m,k),k)= m.

query ev:beep_received(k) ==> ev:stored_key(k).

let A =
! new k;
out (c, k);
event stored_key(k);
out (c, enc(beep, k)).

let B =
! in(c,k);
in (c, xm);
if dec(xm, k) = beep then
out(c, xm);
event beep_received(k).

process A | B

