set verboseClauses=explained.
set debugOutput = true.

type key.
channel c.

free zero:bitstring.
free one:bitstring.

free OK:bitstring.

cell s:= zero.

let A =
new k:bitstring;
lock (s);
read s as r:bitstring;
if r = zero then s := one; unlock (s)
else if r= one then out(c, choice[r, k]).

process A
